# 4. 開発の進め方

ここまでの解説で、このプロジェクトの構造や基本的な動作原理は掴めたかと思います。
この章では、もしあなたがこのゲームに新しい機能を追加したり、改造したりする場合に、どのように考え、どこから手をつければ良いかのヒントを解説します。

## 機能追加・改造の基本的な考え方

「ゲームの仕組み」で解説した通り、このアプリケーションは「**状態(State)**」と「**表示(View)**」と「**ロジック(Logic)**」に分かれています。
機能を追加・改造する場合も、この3つの要素に分けて考えると、作業が非常に整理しやすくなります。

### 例：「ヒント機能」を追加したい！

スパイマスターが「単語数」と「ヒント」を入力できる機能を追加する、というシナリオで考えてみましょう。

#### Step 1: 「状態」を考える

まず、新しく管理する必要があるデータは何かを考えます。

*   「ヒントの単語」を保存する場所が必要 (`string`)
*   「ヒントの関連単語数」を保存する場所が必要 (`number`)
*   今、ヒントが表示されている状態か、そうでないかを管理するフラグもいるかもしれない (`boolean`)

これらの新しいデータを、 `src/types.ts` の `GameState` に追加します。

```typescript
// src/types.ts
export type GameState = {
  // ...既存の定義...
  hintWord: string | null;
  hintNumber: number | null;
};
```

#### Step 2: 「表示(UI)」を考える

次に、ユーザーがそのデータをどこで見て、どこで入力するのかを考えます。

*   ヒントを表示するためのテキストエリアが必要。
*   ヒントを入力するためのフォーム（テキストボックスと送信ボタン）も必要。

これらは `src/App.tsx` の `return (...)` の中に、新しいHTML要素（JSX）として追加することになるでしょう。
例えば、ゲーム盤の上あたりに配置するのが良さそうです。

```jsx
// src/App.tsx の JSX 部分
<div className="game-status">...</div>

// ここにヒント表示・入力フォームを追加する
<div className="hint-section">
  <input type="text" placeholder="ヒント" />
  <input type="number" placeholder="数" />
  <button>ヒントを出す</button>
</div>

{gameOver && ...}
```

#### Step 3: 「ロジック」を考える

最後に、UIと状態をつなぐロジックを考えます。

*   「ヒントを出す」ボタンが押されたら何が起こるべきか？
    1.  入力フォームの値を読み取る。
    2.  その値で `GameState` を更新する。

この処理は `src/App.tsx` に新しい関数 `handleSetHint` として実装するのが良さそうです。そして、ボタンの `onClick` イベントからその関数を呼び出します。

```typescript
// src/App.tsx
const handleSetHint = () => {
  // (実際には入力フォームから値を取得する処理が必要)
  const newHintWord = '乗り物';
  const newHintNumber = 3;

  setGameState(prev => ({
    ...prev,
    hintWord: newHintWord,
    hintNumber: newHintNumber,
  }));
};
```

このように、「状態」「表示」「ロジック」の3つの観点でやるべきことを分解することで、複雑に見える機能追加も、一つ一つの小さなタスクの集まりとして捉えることができます。

## このプロジェクトはどのように作られたか（推測）

このプロジェクトは、おそらく以下のようなステップで作られました。

1.  **環境構築**: `npm create vite@latest` のようなコマンドを使って、React + TypeScript のプロジェクトの雛形（テンプレート）を自動生成します。これにより、`vite.config.ts` や `tsconfig.json` などの面倒な設定ファイルが最初から用意された状態になります。

2.  **データ構造の設計**: まず `src/types.ts` を作り、ゲームに必要なデータは何か（`GameState`）を定義します。これが全体の設計図になります。

3.  **コアロジックの実装**: 次に `src/gameLogic.ts` を作り、「ゲームの開始」「カードの選択」といった、UIとは独立した純粋なゲームルールを実装します。この段階では、まだ画面のことは考えません。

4.  **静的なUIの構築**: `src/components` に `Card.tsx` や `Board.tsx` を作り、まずはダミーのデータを使って見た目だけを構築します。「コンポーネントの作成」と「CSSでのスタイリング」を繰り返して、静的な画面を完成させます。

5.  **UIとロジックの結合**: `src/App.tsx` で `useState` を使って `gameState` を管理し始めます。そして、「新規ゲーム」ボタンが押されたら `createNewGame` を呼ぶ、カードがクリックされたら `selectCard` を呼ぶ、といったように、ユーザーの操作と `gameLogic.ts` の関数を結びつけていきます。

6.  **仕上げ**: ローカルストレージへの保存機能や、細かいUIの調整など、追加の機能を実装して完成です。

## まとめ

この解説書を通じて、このコードネーム風ゲームの全体像から詳細までを解説しました。
ここで学んだ「コンポーネントベース」「状態管理」「関心の分離」といった考え方は、ReactやTypeScriptを使ったモダンなフロントエンド開発において非常に重要なコンセプトです。

ぜひ、ご自身で「スパイマスター用の別画面を作る」「スコア履歴を表示する」などの新しい機能の追加に挑戦してみてください。このプロジェクトは、そのための素晴らしい学習教材となるはずです。

これで、この解説書は終わりです。お疲れ様でした。
